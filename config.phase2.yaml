# Phase 2 Configuration Example
# This configuration enables:
# - Firestore for dynamic subscription management and event storage
# - REST API server for subscription/event CRUD operations
# - WebSocket client for P2P地震情報 data source

source:
  type: p2pquake
  endpoint: wss://api-realtime-sandbox.p2pquake.net/v2/ws
  # Production: wss://api.p2pquake.net/v2/ws

# Empty subscriptions array - managed via REST API
subscriptions: []

# Enable Firestore storage
# Note: project_id and database should be set via environment variables in production
store:
  type: firestore
  # project_id: set via NAMAZU_STORE_PROJECT_ID
  # database: set via NAMAZU_STORE_DATABASE
  # credentials: only needed for local development (GCP uses ADC automatically)

# Enable REST API server
api:
  addr: ":8080"

# ============================================================
# Environment Variables (recommended for production):
# ============================================================
# NAMAZU_SOURCE_ENDPOINT  - WebSocket endpoint
# NAMAZU_STORE_PROJECT_ID - GCP Project ID (required)
# NAMAZU_STORE_DATABASE   - Firestore database name (default: "(default)")
# NAMAZU_STORE_CREDENTIALS- Path to service account JSON (local dev only)
# NAMAZU_API_ADDR         - API server address (default from config)
#
# ============================================================
# Local Development (using .env file):
# ============================================================
# 1. cp .env.example .env
# 2. Edit .env with your values
# 3. go run ./cmd/namazu/ --config config.phase2.yaml
#
# .env file is automatically loaded by godotenv
#
# ============================================================
# GCP Deployment (Compute Engine / Cloud Run):
# ============================================================
# export NAMAZU_STORE_PROJECT_ID=namazu-live
# export NAMAZU_STORE_DATABASE=localdev
# # No credentials needed - uses Application Default Credentials (ADC)
# ./namazu --config config.phase2.yaml
