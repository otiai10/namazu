# ============================================================
# namazu - Test Environment (Emulator Mode)
# ============================================================
#
# このファイルは、認証機能のテスト用設定テンプレートです。
# Firebase Emulator を使用し、GCP への接続なしでテストできます。
#
# 使用方法:
#   1. docker compose up -d firebase-emulators
#   2. cp .env.test.example .env.test
#   3. source .env.test && go run ./cmd/namazu/
#   4. ./scripts/test-auth.sh
#
# ============================================================

# ============================================================
# データソース設定
# ============================================================

NAMAZU_SOURCE_TYPE=p2pquake
NAMAZU_SOURCE_ENDPOINT=wss://api-realtime-sandbox.p2pquake.net/v2/ws

# ============================================================
# Firestore 設定 (Emulator)
# ============================================================

NAMAZU_STORE_PROJECT_ID=namazu-test
# NAMAZU_STORE_DATABASE=
# NAMAZU_STORE_CREDENTIALS=

# ============================================================
# REST API サーバー設定
# ============================================================

NAMAZU_API_ADDR=:8080

# ============================================================
# 認証設定 (Emulator)
# ============================================================

NAMAZU_AUTH_ENABLED=true
NAMAZU_AUTH_PROJECT_ID=namazu-test
# NAMAZU_AUTH_CREDENTIALS=
NAMAZU_AUTH_TENANT_ID=localdev

# ============================================================
# Firebase Emulator 設定
# ============================================================

FIREBASE_AUTH_EMULATOR_HOST=localhost:9099
FIRESTORE_EMULATOR_HOST=localhost:8080

# ============================================================
# テストユーザー設定
# ============================================================
#
# Emulator モードでは、テストスクリプトが自動でユーザーを作成します。
# 任意のメールアドレスとパスワードを設定できます。

TEST_EMAIL=test@example.com
TEST_PASSWORD=testpassword123

# ============================================================
# テストの実行方法
# ============================================================
#
# 【Emulator モード（推奨）】
#
# 1. Emulator 起動
#    docker compose up -d firebase-emulators
#
# 2. サーバー起動（別ターミナル）
#    source .env.test && go run ./cmd/namazu/
#
# 3. 認証テスト実行
#    ./scripts/test-auth.sh
#
# 4. Emulator UI で確認
#    http://localhost:4000
#
# ============================================================
# 本番 GCIP を使う場合
# ============================================================
#
# 本番 Identity Platform のテストテナントを使用したい場合:
#
#   1. FIRESTORE_EMULATOR_HOST をコメントアウト
#   2. FIREBASE_AUTH_EMULATOR_HOST をコメントアウト
#   3. 以下の値を設定:
#
#   NAMAZU_STORE_PROJECT_ID=namazu-live
#   NAMAZU_STORE_DATABASE=localdev
#   NAMAZU_STORE_CREDENTIALS=namazu-live-xxx.json
#   NAMAZU_AUTH_PROJECT_ID=namazu-live
#   NAMAZU_AUTH_CREDENTIALS=namazu-live-xxx.json
#   NAMAZU_AUTH_TENANT_ID=test-hwuh8
#   FIREBASE_API_KEY=AIzaSyXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
#
