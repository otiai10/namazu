# ============================================================
# namazu - Local Development Environment
# ============================================================
#
# このファイルは、ローカル開発環境の設定テンプレートです。
# 使用方法:
#   cp .env.localdev.example .env
#   # 値を編集
#   go run ./cmd/namazu/
#
# 設定ファイル不要！環境変数のみで動作します。
#
# ============================================================

# ============================================================
# データソース設定
# ============================================================
#
# データソースタイプ
# - 現在は "p2pquake" のみ対応
# - 省略時のデフォルト: "p2pquake"
#
NAMAZU_SOURCE_TYPE=p2pquake

# P2P地震情報 WebSocket API のエンドポイント（必須）
# - サンドボックス: wss://api-realtime-sandbox.p2pquake.net/v2/ws
#   → テストデータが30秒ごとに配信される（開発用）
# - 本番: wss://api.p2pquake.net/v2/ws
#   → 実際の地震情報のみ配信される
#
# 注意: WebSocket接続は10分で強制切断されるため、
#       アプリケーションは自動再接続を行います。
#
NAMAZU_SOURCE_ENDPOINT=wss://api-realtime-sandbox.p2pquake.net/v2/ws

# ============================================================
# Firestore 設定 (Phase 2+)
# ============================================================
#
# Firestore を使用すると以下が可能になります:
# - REST API による Subscription の動的管理
# - 地震イベント履歴の永続化
# - ユーザー情報の保存
#
# プロジェクト ID (必須)
# - GCP プロジェクト ID
# - Firebase プロジェクト ID と同じ
#
NAMAZU_STORE_PROJECT_ID=namazu-live

# データベース名 (オプション)
# - デフォルト: "(default)"
# - 開発環境では専用データベースを推奨（本番データと分離）
#
NAMAZU_STORE_DATABASE=localdev

# サービスアカウント認証情報 (ローカル開発のみ)
# - GCP 上では不要（ADC が自動で認証）
# - ローカルでは JSON キーファイルのパスを指定
# - Firebase Console > Project Settings > Service accounts > Generate new private key
#
NAMAZU_STORE_CREDENTIALS=namazu-live-XXXXXX-serviceaccount.json

# ============================================================
# REST API サーバー設定 (Phase 2+)
# ============================================================
#
# API サーバーのリッスンアドレス
# - 形式: [host]:port
# - 例: ":8080" (全インターフェース), "localhost:8080" (ローカルのみ)
#
NAMAZU_API_ADDR=:8080

# ============================================================
# 認証設定 (Phase 3+)
# ============================================================
#
# Google Identity Platform / Firebase Authentication を使用した認証
#
# 認証の有効化
# - "true" で認証を有効化
# - 有効化すると /api/subscriptions などが認証必須になる
#
NAMAZU_AUTH_ENABLED=true

# Firebase プロジェクト ID (認証用)
# - 通常は NAMAZU_STORE_PROJECT_ID と同じ
#
NAMAZU_AUTH_PROJECT_ID=namazu-live

# サービスアカウント認証情報 (ローカル開発のみ)
# - JWT 検証に Firebase Admin SDK を使用
# - GCP 上では不要（ADC が自動で認証）
#
NAMAZU_AUTH_CREDENTIALS=namazu-live-XXXXXX-serviceaccount.json

# テナント ID (オプション)
# - Identity Platform のマルチテナント機能を使用する場合
# - 通常の Firebase Auth では不要（空欄でOK）
# - localdev 環境では Google OAuth のみ使用するため不要
#
# NAMAZU_AUTH_TENANT_ID=

# ============================================================
# 補足情報
# ============================================================
#
# 【GCP 認証の仕組み】
# ローカル開発:
#   1. サービスアカウント JSON (NAMAZU_*_CREDENTIALS)
#   2. gcloud auth application-default login
#
# GCP 上 (Cloud Run, GCE など):
#   - Application Default Credentials (ADC) が自動で使用される
#   - 環境変数の CREDENTIALS 設定は不要
#
# 【データベース分離の推奨構成】
# - localdev: ローカル開発用
# - staging: ステージング環境用
# - (default): 本番環境用
#
# 【確認コマンド】
# サーバー起動:
#   source .env && go run ./cmd/namazu/
# または:
#   go run ./cmd/namazu/  # godotenv が .env を自動読み込み
#
# ヘルスチェック:
#   curl http://localhost:8080/health
#
# 認証テスト (Google OAuth でログイン後):
#   curl -H "Authorization: Bearer $TOKEN" http://localhost:8080/api/me
#
